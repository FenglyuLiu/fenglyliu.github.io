---
const { src, alt = '', caption = '', width = 'full' } = Astro.props
const widthClass = width === 'half' ? 'w-1/2 mx-auto' : 'w-full'
---
<figure class="my-6">
<img src={src} alt={alt} loading="lazy" class={`rounded-md ${widthClass} max-w-full h-auto`} />
{caption && <figcaption class="text-xs opacity-70 mt-2">{caption}</figcaption>}
</figure>

<style>
  /* 移动端图片优化 - 强制确保不超出屏幕 */
  @media (max-width: 768px) {
    figure {
      margin: 1rem 0;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }
    
    figure img {
      max-width: 100% !important;
      width: 100% !important;
      height: auto !important;
      object-fit: contain;
    }
  }
</style>
